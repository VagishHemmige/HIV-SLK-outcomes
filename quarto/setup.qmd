---
title: "Setup"
format: html
---


The code in this script imports libraries, initializes constants, and performs other such preparatory work for the main analysis.

```{r, include=FALSE}

#Ensures pipe works
library(tidyverse)
library(gt)

```


::: callout-note
### Source code

The full R script is available at:

-   [`R/setup.R`](https://github.com/VagishHemmige/HIV-SLK-outcomes/blob/master/R/setup.R)

:::

## Libraries

The analysis relies on a set of open-source R packages for data management, cohort construction, visualization, and statistical modeling. These libraries were selected based on their stability, community support, and suitability for large-scale longitudinal health data. 


```{r eval=FALSE}

# Libraries necessary for the analysis

#File import libraries
library(haven)
library(readr)
library(readxl)

#File export libraries
library(writexl)

#Data management libraries
library(tidyverse)
library(labelled)
library(dplyr)
library(tidyr)
library(janitor)
library(purrr)
library(lubridate)
library(conflicted)

#Core library for the SRTR
library(sRtr)

#Flowchart libraries
library(strobe)
library(flowchart)

#Statistical modeling libraries
library(MatchIt)
library(survival)
library(MASS)
library(sandwich)
library(lmtest)


#Table libraries
library(gtsummary)
library(gt)

#Plotting libraries
library(ggplot2)
library(survminer)


#Use the conflicted package to ensure that the select and filter functions are not superseded
conflict_prefer("select", "dplyr")
conflict_prefer("filter", "dplyr")
conflict_prefer("lag", "dplyr")


```

The table below lists the required packages along with links to their primary documentation.

```{r, echo=FALSE}


libraries_table <- tibble::tibble(
  Category = c(
    # File import
    "File import",
    "File import",
    "File import",
    
    # File export
    "File export",
    
    # Data management
    "Data management",
    "Data management",
    "Data management",
    "Data management",
    "Data management",
    "Data management",
    "Data management",
    "Data management",
    
    # SRTR-specific
    "SRTR-specific",
    
    # Flowcharting
    "Flowcharting",
    "Flowcharting",
    
    # Statistical modeling
    "Statistical modeling",
    "Statistical modeling",
    "Statistical modeling",
    "Statistical modeling",
    "Statistical modeling",
    
    # Tables
    "Tables",
    "Tables",
    
    # Plotting
    "Plotting",
    "Plotting"
  ),
  Package = c(
    # File import
    "haven",
    "readr",
    "readxl",
    
    # File export
    "writexl",
    
    # Data management
    "tidyverse",
    "labelled",
    "dplyr",
    "tidyr",
    "janitor",
    "purrr",
    "lubridate",
    "conflicted",
    
    # SRTR-specific
    "sRtr",
    
    # Flowcharting
    "strobe",
    "flowchart",
    
    # Statistical modeling
    "MatchIt",
    "survival",
    "MASS",
    "sandwich",
    "lmtest",
    
    # Tables
    "gtsummary",
    "gt",
    
    # Plotting
    "ggplot2",
    "survminer"
  ),
  Documentation = c(
    # File import
    "[CRAN – haven](https://cran.r-project.org/package=haven)",
    "[CRAN – readr](https://cran.r-project.org/package=readr)",
    "[CRAN – readxl](https://cran.r-project.org/package=readxl)",
    
    # File export
    "[CRAN – writexl](https://cran.r-project.org/package=writexl)",
    
    # Data management
    "[tidyverse.org](https://www.tidyverse.org/)",
    "[CRAN – labelled](https://cran.r-project.org/package=labelled)",
    "[CRAN – dplyr](https://cran.r-project.org/package=dplyr)",
    "[CRAN – tidyr](https://cran.r-project.org/package=tidyr)",
    "[CRAN – janitor](https://cran.r-project.org/package=janitor)",
    "[CRAN – purrr](https://cran.r-project.org/package=purrr)",
    "[lubridate.tidyverse.org](https://lubridate.tidyverse.org/)",
    "[CRAN – conflicted](https://cran.r-project.org/package=conflicted)",
    
    # SRTR-specific
    "[GitHub – sRtr](https://github.com/vagishhemmige/sRtr)",
    
    # Flowcharting
    "[GitHub – strobe](https://github.com/vagishhemmige/strobe)",
    "[CRAN – flowchart](https://cran.r-project.org/package=flowchart)",
    
    # Statistical modeling
    "[CRAN – MatchIt](https://cran.r-project.org/package=MatchIt)",
    "[CRAN – survival](https://cran.r-project.org/package=survival)",
    "[CRAN – MASS](https://cran.r-project.org/package=MASS)",
    "[CRAN – sandwich](https://cran.r-project.org/package=sandwich)",
    "[CRAN – lmtest](https://cran.r-project.org/package=lmtest)",
    
    # Tables
    "[gtsummary documentation](https://www.danieldsjoberg.com/gtsummary/)",
    "[gt documentation](https://gt.rstudio.com/)",
    
    # Plotting
    "[ggplot2.tidyverse.org](https://ggplot2.tidyverse.org/)",
    "[CRAN – survminer](https://cran.r-project.org/package=survminer)"
  )
)

libraries_table |>
  gt::gt() |>
  gt::fmt_markdown(columns = "Documentation") |>
  gt::cols_label(
    Category = "Category",
    Package = "R package",
    Documentation = "Documentation"
  ) |>
  gt::tab_header(
    title = "Required R Packages",
    subtitle = "Libraries used for data processing, visualization, and statistical modeling"
  )|>
  gt::tab_style(
  style = gt::cell_text(font = "mono"),
  locations = gt::cells_body(columns = Package)
)



```




## Other portions of the analysis

-   [**About**](about.qmd): methods, assumptions, and disclosures
